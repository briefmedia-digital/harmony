!function(){function a(a,b){log("event","Creating new ad slot.");var c,d,e={slotRenderEnded:[]},f=new Date;log("metric",{event:"Slot defined",slot:b.name});var g=b.mapping||[],h=b.companion||!1,i=(b.interstitial||!1,b.targeting||{});c=b.interstitial?googletag.defineOutOfPageSlot(b.adunit,b.id):googletag.defineSlot(b.adunit,b.sizes,b.id),c.div_id=b.id,c.breakpoint=b.breakpoint;for(d in i)c.setTargeting(d,i[d]);return c.defineSizeMapping(g),"function"==typeof b.callback&&(e.slotRenderEnded.push(b.callback),log("event","Attached provided callback for "+b.name)),c.on=function(a,b){e[a]=e[a]||[],e[a].push(b),log("event","Attached new callback for "+a)},a.addEventListener("slotRenderEnded",function(a){var d,g,h;if(a.slot===c)for(log("event","slotRenderEnded for "+b.name),h=new Date,log("metric",{event:"Total load time",slot:b.name,value:h-f}),g=e.slotRenderEnded.length,d=0;g>d;d+=1)e.slotRenderEnded[d](a)}),h&&c.addService(googletag.companionAds()),c.addService(a),c}window.Lumberjack=function(){var a,b={},c={};return a=function(a,d){var e,f,g,h="string"==typeof a,i=typeof d,j="undefined"!==i&&"function"!==i;if(!h||!j)throw Error("Lumberjack Error: log(event, data) requires an event {String} and a payload {String|Object|Number|Boolean}.");for(g={time:new Date,data:d},b[a]=b[a]||[],b[a].push(g),c[a]=c[a]||[],f=c[a].length,e=0;f>e;e+=1)c[a][e](d)},a.readback=function(a,c){var d="string"==typeof a;if(d)return c?JSON.stringify(b[a],null,4):b[a];throw Error("log.readback(event, pretty) requires an event {String}.")},a.on=function(a,b){var d="string"==typeof a,e="function"==typeof b;if(!d||!e)throw Error("log.on(event, cb) requires an event {String} and a callback {Function}.");c[a]=c[a]||[],c[a].push(b)},a},window.Harmony=function(){var b={},c={},d=window.Lumberjack();return d("metric",{event:"Harmony defined"}),{load:function(e){d("event","Generating ad slots.");var f,g,h,i=e.slots,j=googletag.pubads();for(f=0;i>f;f+=1)h=i[f],g=a(j,h),b[h.name]=g,c[h.breakpoint]=c[h.breakpoint]||[],c[h.breakpoint].push(g);d("event","Applying pubads targeting."),i=e.targeting;for(f in i)h=i[f],d("- "+f+" = "+h),j.setTargeting(f,h);d("metric",{event:"Harmony config loaded"})},log:d,slot:b,breakpoint:c,defineSlot:function(d){var e=googletag.pubads(),f=a(e,d);b[d.name]=f,c[d.breakpoint]=c[d.breakpoint]||[],c[d.breakpoint].push(f)},show:{breakpoint:function(a){Adgeletti.display(a);var b,e,f;d("event","Showing ads at breakpoint "+a);try{e=c[a].length}catch(g){throw d("error","Failed to show breakpoint "+a),Error("Failed to show breakpoint "+a)}for(b=0;e>b;b+=1)f=c[a][b].div_id,googletag.display(f),document.getElementById(f).style.display="block"},slot:function(a){d("event","Showing ad at slot "+a);var c=b[a].div_id;googletag.display(c),document.getElementById(c).style.display="block"}},hide:{breakpoint:function(a){var b,e,f;Adgeletti.hide(a),d("event","Hiding ads at breakpoint "+a);try{e=c[a].length}catch(g){throw d("error","Failed to hide breakpoint "+a),Error("Failed to hide breakpoint "+a)}for(b=0;e>b;b+=1)f=c[a][b].div_id,document.getElementById(f).style.display="none"},slot:function(a){d("event","Hiding ad at slot "+a);var c=b[a].div_id;document.getElementById(c).style.display="none"}}}},window.console=window.console||{log:function(){}},window.Adgeletti={data:{positions:{},showing:{},displayed:{},keywords:{}},add_keywords:function(a){for(var b in a)a.hasOwnProperty(b)&&(this.data.keywords[b]=a[b])},position:function(a){var b=this.data.positions[a.breakpoint]=this.data.positions[a.breakpoint]||[];b.push({ad_unit_code:a.ad_unit_code,sizes:a.sizes,div_id:a.div_id,slot:a.slot,is_companion:a.is_companion})},display:function(a){function b(a,b){var c=function(){var c=googletag.defineSlot(a.ad_unit_code,a.sizes,a.div_id);a.is_companion&&(console.log("Configuring companion ad in position for div ID `"+a.div_id+"`"),c.addService(googletag.companionAds())),c.addService(googletag.pubads());for(var d in b.data.keywords)b.data.keywords.hasOwnProperty(d)&&c.setTargeting(d,b.data.keywords[d]);c.setTargeting("ad_slot",a.slot),c.setTargeting("adposition",a.slot),a.ad=c,googletag.display(a.div_id)};return c}console.log('Displaying ads for breakpoint "'+a+'"');for(var c=this.data.displayed[a]=this.data.displayed[a]||[],d=this.data.showing[a]=this.data.showing[a]||[],e=this.data.positions[a]||[],f=0;f<e.length;++f){var g=e[f];d.push(g),g.isHidden&&(console.log("Showing ad div #"+g.div_id),document.getElementById(g.div_id).style.display="block",g.isHidden=!1);for(var h=!1,i=0;i<c.length;i++)if(c[i].div_id==g.div_id){console.log("Ad "+g.ad_unit_code+' already displayed for breakpoint "'+a+'"'),h=!0;break}if(!h){c.push(g);var j=this;console.log("Displaying ad "+g.ad_unit_code+' for breakpoint "'+a+'"');var k=b(g,j);k()}}},hide:function(a){console.log('Hiding ads for breakpoint "'+a+'"');for(var b=this.data.showing[a]||[],c=0;c<b.length;++c){var d=b[c];console.log("Hiding ad div #"+d.div_id),document.getElementById(d.div_id).style.display="none",d.isHidden=!0}this.data.showing[a]=[]},refresh:function(){var a=[];for(var b in this.data.showing)if(this.data.showing.hasOwnProperty(b))for(var c=this.data.showing[b],d=0;d<c.length;d++)a.push(c[d].ad);googletag.pubads().refresh(a)}}}();