!function(a){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=a();else if("function"==typeof define&&define.amd)define([],a);else{var b;b="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,b.harmony=a()}}(function(){return function a(b,c,d){function e(g,h){if(!c[g]){if(!b[g]){var i="function"==typeof require&&require;if(!h&&i)return i(g,!0);if(f)return f(g,!0);var j=new Error("Cannot find module '"+g+"'");throw j.code="MODULE_NOT_FOUND",j}var k=c[g]={exports:{}};b[g][0].call(k.exports,function(a){var c=b[g][1][a];return e(c?c:a)},k,k.exports,a,b,c,d)}return c[g].exports}for(var f="function"==typeof require&&require,g=0;g<d.length;g++)e(d[g]);return e}({1:[function(a,b,c){(function(a){b.exports=function(b){var c,d={},e={},f=[],g=a.localStorage||{};return c=function(a,c){var h,i,a,j,k="string"==typeof a,l=typeof c,m="undefined"!==l&&"function"!==l;if("on"===g.lumberjack||b){if(!k||!m)throw Error("Lumberjack Error: log(channel, data) requires an channel {String} and a payload {String|Object|Number|Boolean}.");for(j={time:new Date,data:c,channel:a,id:f.length},d[a]=d[a]||[],d[a].push(j),f.push(j),e[a]=e[a]||[],i=e[a].length,h=0;h<i;h+=1)e[a][h](c)}},c.clear=function(a){a?d[a]=[]:(d={},f=[])},c.readback=function(a,b){var c="string"==typeof a;if(c)return b?JSON.stringify(d[a],null,4):d[a]||[];throw Error("log.readback(channel, pretty) requires an channel {String}.")},c.readback.master=function(a){return a?JSON.stringify(f,null,4):f},c.readback.channels=function(a){var b=Object.keys(d);return a?JSON.stringify(b):b},c.flush=function(a){var b;return a?(b=d[a],d[a]=[]):(d={},f=[],b=[]),b},c.on=function(a,b){var c="string"==typeof a,d="function"==typeof b;if(!c||!d)throw Error("log.on(channel, cb) requires an channel {String} and a callback {Function}.");e[a]=e[a]||[],e[a].push(b)},c.off=function(a){var b="string"==typeof a;if(!b)throw Error("log.off(channel) requires an channel {String}.");e[a]=[]},c.enable=function(){b=!0},c.disable=function(){b=!1},c}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],2:[function(a,b,c){b.exports={name:"harmonyjs",version:"7.0.1",description:"Simplify your DFP business logic.",main:"src/harmony.js",scripts:{test:"grunt test"},repository:{type:"git",url:"https://github.com/cobbdb/harmony.git"},keywords:["doubleclick","ads","dfp","revenue","adslot","adunit","advertising"],homepage:"https://github.com/cobbdb/harmony",bugs:{url:"https://github.com/cobbdb/harmony/issues"},author:"Dan Cobb <cobbdb@gmail.com> (http://www.github.com/cobbdb)",license:"MIT",dependencies:{lumberjackjs:"1.2.0"},devDependencies:{curb:"^1.0.1",grunt:"^1.0.1","grunt-browserify":"^5.0.0","grunt-contrib-jasmine":"^1.0.3","grunt-contrib-jshint":"^1.0.0","grunt-contrib-uglify":"^2.0.0","grunt-exec":"^1.0.0",jquery:"3.x",matchdep:"^1.0.1",semver:"^5.3.0"}}},{}],3:[function(a,b,c){var d=a("../modules/slot-factory.js"),e=a("../modules/group-factory.js");b.exports={slot:function(a){d.get(a).enabled=!1},group:function(a){var b=e.create(a);b.forEach(function(a){a.enabled=!1})}}},{"../modules/group-factory.js":10,"../modules/slot-factory.js":14}],4:[function(a,b,c){var d=a("../modules/slot-factory.js"),e=a("../modules/group-factory.js");b.exports={slot:function(a){var b=d.get(a);b.mock||(b.enabled=!0)},group:function(a){var b=e.create(a);b.forEach(function(a){a.enabled=!0})}}},{"../modules/group-factory.js":10,"../modules/slot-factory.js":14}],5:[function(a,b,c){var d=a("../modules/breakpoint-watcher.js"),googletag=a("../modules/googletag.js"),e=a("../modules/slot-factory.js");b.exports={slots:function(a){a=a||[],a.forEach(e.create)},targeting:function(a){var b,c=googletag.pubads();a=a||{};for(b in a)c.setTargeting(b,a[b])},breakpoints:function(a){d.add(a)}}},{"../modules/breakpoint-watcher.js":8,"../modules/googletag.js":9,"../modules/slot-factory.js":14}],6:[function(a,b,c){var d=a("../modules/slot-factory.js"),e=a("../modules/group-factory.js"),f=a("../modules/master-group.js"),g=(a("../modules/log.js"),a("../util/enable-services.js")),googletag=a("../modules/googletag.js");b.exports={all:function(){var a=[];g(),f.forEach(function(b){b.enabled&&(b.active?a.push(b.gpt):(b.activate(),googletag.display(b.id)))}),a.length&&googletag.pubads().refresh(a)},group:function(a){var b=e.create(a),c=[];g(),b.forEach(function(a){a.enabled&&(a.active?c.push(a.gpt):(a.activate(),googletag.display(a.id)))}),c.length&&googletag.pubads().refresh(c)},slot:function(a){var b=d.get(a);b.enabled&&(g(),b.active?googletag.pubads().refresh([b.gpt]):(b.activate(),googletag.display(b.id)))}}},{"../modules/googletag.js":9,"../modules/group-factory.js":10,"../modules/log.js":11,"../modules/master-group.js":12,"../modules/slot-factory.js":14,"../util/enable-services.js":19}],7:[function(a,b,c){var d=a("./modules/log.js"),e=a("./modules/slot-factory.js"),f=a("./modules/group-factory.js"),g=a("./types/event-handler.js"),h=g(),i=a("./modules/breakpoint-watcher.js"),googletag=a("./modules/googletag.js");i.on("update",function(a){h.trigger("breakpoint/update",a)}),googletag.cmd.push(function(){googletag.pubads().addEventListener("slotRenderEnded",function(a){h.trigger("slotRenderEnded",a)}),googletag.pubads().addEventListener("impressionViewable",function(a){h.trigger("impressionViewable",a)})}),b.exports={on:h.on,one:h.one,off:h.off,trigger:h.trigger,version:a("../package.json").version,load:a("./actions/load.js"),addBreakpoints:i.add,getBreakpoints:i.getAll,breakpoint:i.current,log:d,slot:e.get,group:f.create,defineSlot:e.create,enable:a("./actions/enable.js"),disable:a("./actions/disable.js"),show:a("./actions/show.js")}},{"../package.json":2,"./actions/disable.js":3,"./actions/enable.js":4,"./actions/load.js":5,"./actions/show.js":6,"./modules/breakpoint-watcher.js":8,"./modules/googletag.js":9,"./modules/group-factory.js":10,"./modules/log.js":11,"./modules/slot-factory.js":14,"./types/event-handler.js":15}],8:[function(a,b,c){(function(c){var d,e=a("../types/event-handler.js"),f=e(),g=!1,h=!1,i=[];b.exports={on:f.on,one:f.one,off:f.off,trigger:f.trigger,current:function(){var a=1,b=c.innerWidth;return i.forEach(function(c){b>=c&&(a=c)}),a},add:function(a){i=i.concat(a||[]),i.sort(function(a,b){return a-b}),b.exports.run()},getAll:function(){return i},clear:function(){i=[]},run:function(){function a(){var a=b.exports.current();a!==d&&(d=a,f.trigger("update",a))}!g&&i.length&&(g=!0,c.addEventListener("resize",function(){h||(h=!0,c.requestAnimationFrame(function(){a(),h=!1}))})),a()}}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../types/event-handler.js":15}],9:[function(a,b,c){(function(a){var googletag=a.googletag=a.googletag||{};googletag.cmd=googletag.cmd||[],b.exports=googletag}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],10:[function(a,b,c){var d=a("../types/group.js"),e={};b.exports={clear:function(){e={}},create:function(a){return e[a]=e[a]||d(a),e[a]}}},{"../types/group.js":16}],11:[function(a,b,c){var d=a("lumberjackjs");b.exports=d()},{lumberjackjs:1}],12:[function(a,b,c){var d=a("../types/group.js");b.exports=d()},{"../types/group.js":16}],13:[function(a,b,c){var d={},e={},f={};b.exports=function(a){return{set:{event:function(b,c){var d=e[a]=e[a]||{};d[b]=d[b]||[],d[b].push(c)},single:function(b,c){var e=d[a]=d[a]||{};e[b]=e[b]||[],e[b].push(c)},targeting:function(b,c){f[a]=f[a]||{},f[a][b]=c}},get:{events:function(){return e[a]||[]},singles:function(){return d[a]||[]},targeting:function(){return f[a]||{}}}}},b.exports.clear=function(){d={},e={},f={}}},{}],14:[function(a,b,c){var d=a("../types/slot.js"),e=a("../types/mock-slot.js"),f=a("./group-factory.js"),g=a("../modules/master-group.js"),h=a("../util/scrub-conf.js"),i=a("./log.js");b.exports={create:function(a){var b,c;try{a=h(a),b=d(a),g.add(b),b.group&&(c=f.create(b.group),c.add(b))}catch(b){i("error",{conf:a,msg:b.message})}finally{return b||null}},get:function(a){return g.has(a)?g.get(a):e(a)}}},{"../modules/master-group.js":12,"../types/mock-slot.js":17,"../types/slot.js":18,"../util/scrub-conf.js":23,"./group-factory.js":10,"./log.js":11}],15:[function(a,b,c){b.exports=function(a){var b,c={},d={},e={};a=a||{};for(b in a.events)c[b]=a.events[b];for(b in a.singles)d[b]=a.singles[b];return{on:function(a,b,d){!d&&a in e&&b(e[a]),c[a]=c[a]||[],c[a].push(b)},one:function(a,b,c){!c&&a in e?b(e[a]):(d[a]=d[a]||[],d[a].push(b))},off:function(a){a?(c[a]=[],d[a]=[]):(c={},d={},e={})},trigger:function(a,b){a in c&&c[a].forEach(function(a){a(b)}),a in d&&(d[a].forEach(function(a){a(b)}),d[a]=[]),e[a]=b}}}},{}],16:[function(a,b,c){b.exports=function(a){var b=[],c={};return{name:a,length:function(){return b.length},add:function(a){b.push(a),c[a.name]=a},get:function(a){return c[a]||null},getAll:function(){return b},has:function(a){return a in c},clear:function(){b=[],c={}},forEach:function(a){a=a||function(){},b.forEach(a)}}}},{}],17:[function(a,b,c){var d=a("../modules/slot-cache.js"),e=function(){};b.exports=function(a){var b=d(a);return{gpt:{setTargeting:b.set.targeting},mock:!0,name:a,off:e,on:b.set.event,one:b.set.single,trigger:e}}},{"../modules/slot-cache.js":13}],18:[function(a,b,c){var d=(a("../modules/log.js"),a("../modules/slot-cache.js")),e=a("./event-handler.js"),googletag=a("../modules/googletag.js"),f=a("../util/list-concat-left.js"),g=a("../util/map-merge-left.js");b.exports=function(a){var b,c,h=d(a.name),i=e({events:f(a.on,h.get.events()),singles:f(a.one,h.get.singles())}),j=g(a.targeting,h.get.targeting());b=a.outofpage?googletag.defineOutOfPageSlot(a.adunit,a.id):googletag.defineSlot(a.adunit,a.sizes,a.id);for(c in j)b.setTargeting(c,j[c]);return a.mapping&&b.defineSizeMapping(a.mapping),b.name=a.name,{name:a.name,id:a.id,sizes:a.sizes,adunit:a.adunit,group:a.group||null,companion:a.companion||!1,outofpage:a.outofpage||!1,enabled:a.enabled!==!1,on:i.on,one:i.one,off:i.off,trigger:i.trigger,active:!1,gpt:b,activate:function(){if(!this.active){var a=googletag.pubads();a.addEventListener("slotRenderEnded",function(a){a.slot===b&&i.trigger("slotRenderEnded",a)}),a.addEventListener("impressionViewable",function(a){a.slot===b&&i.trigger("impressionViewable",a)}),b.addService(a),this.companion&&b.addService(googletag.companionAds()),this.active=!0}}}}},{"../modules/googletag.js":9,"../modules/log.js":11,"../modules/slot-cache.js":13,"../util/list-concat-left.js":21,"../util/map-merge-left.js":22,"./event-handler.js":15}],19:[function(a,b,c){var googletag=a("../modules/googletag.js");b.exports=function(){googletag.pubadsReady||googletag.enableServices()}},{"../modules/googletag.js":9}],20:[function(a,b,c){b.exports={curr:0,next:function(){return this.curr+=1,this.curr}}},{}],21:[function(a,b,c){b.exports=function(a,b){var c;a=a||{},b=b||{};for(c in a)a[c]=[].concat(a[c]);for(c in b)a[c]=[].concat(a[c]||[],b[c]);return a}},{}],22:[function(a,b,c){b.exports=function(a,b){var c;a=a||{},b=b||{};for(c in b)a[c]=b[c];return a}},{}],23:[function(a,b,c){(function(c){var d=a("./id-factory.js");a("../modules/master-group.js");b.exports=function(a){var b,e=c.document.getElementById(a.id);if(e)return b=d.next(),a.id=e.id="h-ad-"+b,a;throw Error("Ad slot "+a.name+" container #"+a.id+" was not found!")}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../modules/master-group.js":12,"./id-factory.js":20}]},{},[7])(7)});