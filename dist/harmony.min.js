!function(){function a(a,c){b("event","Creating new ad slot.");var d,e,f={slotRenderEnded:[]},g=new Date;b("metric",{event:"Slot defined",slot:c.name});var h=c.mapping||[],i=c.companion||!1,j=(c.interstitial||!1,c.targeting||{});d=c.interstitial?googletag.defineOutOfPageSlot(c.adunit,c.id):googletag.defineSlot(c.adunit,c.sizes,c.id),d.divId=c.id,d.breakpoint=c.breakpoint;for(e in j)d.setTargeting(e,j[e]);return d.defineSizeMapping(h),"function"==typeof c.callback&&(f.slotRenderEnded.push(c.callback),b("event","Attached provided callback for "+c.name)),d.on=function(a,c){f[a]=f[a]||[],f[a].push(c),b("event","Attached new callback for "+a)},a.addEventListener("slotRenderEnded",function(a){var e,h,i;if(a.slot===d)for(b("event","slotRenderEnded for "+c.name),i=new Date,b("metric",{event:"Total load time",slot:c.name,value:i-g}),h=f.slotRenderEnded.length,e=0;h>e;e+=1)f.slotRenderEnded[e](a)}),i&&d.addService(googletag.companionAds()),d.addService(a),d}window.Lumberjack=function(){var a,b={},c={},d=[];return a=function(a,e){var f,g,a,h="string"==typeof a,i=typeof e,j="undefined"!==i&&"function"!==i;if(!h||!j)throw Error("Lumberjack Error: log(channel, data) requires an channel {String} and a payload {String|Object|Number|Boolean}.");for(entry={time:new Date,data:e,channel:a,id:d.length},b[a]=b[a]||[],b[a].push(entry),d.push(entry),c[a]=c[a]||[],g=c[a].length,f=0;g>f;f+=1)c[a][f](e)},a.readback=function(a,c){var d="string"==typeof a;if(d)return c?JSON.stringify(b[a],null,4):b[a];throw Error("log.readback(channel, pretty) requires an channel {String}.")},a.readback.master=function(a){return a?JSON.stringify(d,null,4):d},a.on=function(a,b){var d="string"==typeof a,e="function"==typeof b;if(!d||!e)throw Error("log.on(channel, cb) requires an channel {String} and a callback {Function}.");c[a]=c[a]||[],c[a].push(b)},a.off=function(a){var b="string"==typeof a;if(!b)throw Error("log.off(channel) requires an channel {String}.");c[a]=[]},a};var b=Lumberjack();window.Harmony=function(){var c={},d={};return b("metric",{event:"Harmony defined"}),{load:function(e){b("event","Generating ad slots.");var f,g,h,i=e.slots,j=i.length,k=googletag.pubads();for(f=0;j>f;f+=1)h=i[f],g=a(k,h),c[h.name]=g,d[h.breakpoint]=d[h.breakpoint]||[],d[h.breakpoint].push(g);b("event","Applying pubads targeting."),i=e.targeting;for(f in i)h=i[f],b("event","- "+f+" = "+h),k.setTargeting(f,h);b("metric",{event:"Harmony config loaded"})},log:b,slot:c,breakpoint:d,defineSlot:function(b){var e=googletag.pubads(),f=a(e,b);c[b.name]=f,d[b.breakpoint]=d[b.breakpoint]||[],d[b.breakpoint].push(f)},show:{breakpoint:function(a){Adgeletti.display(a);var c,e,f,g;b("event","Showing ads at breakpoint "+a);try{for(e=d[a].length,c=0;e>c;c+=1)f=d[a][c].divId,googletag.display(f),g=document.getElementById(f),g&&(g.style.display="block")}catch(h){throw b("error","Failed to show breakpoint "+a),h}},slot:function(a){b("event","Showing ad at slot "+a);var d=c[a].divId;googletag.display(d),document.getElementById(d).style.display="block"}},hide:{breakpoint:function(a){var c,e,f,g;Adgeletti.hide(a),b("event","Hiding ads at breakpoint "+a);try{for(e=d[a].length,c=0;e>c;c+=1)f=d[a][c].divId,g=document.getElementById(f),g&&(g.style.display="none")}catch(h){throw b("error","Failed to hide breakpoint "+a),h}},slot:function(a){b("event","Hiding ad at slot "+a);var d=c[a].divId;document.getElementById(d).style.display="none"}}}},window.console=window.console||{log:function(){}},window.Adgeletti={data:{positions:{},showing:{},displayed:{},keywords:{}},add_keywords:function(a){for(var b in a)a.hasOwnProperty(b)&&(this.data.keywords[b]=a[b])},position:function(a){var b=this.data.positions[a.breakpoint]=this.data.positions[a.breakpoint]||[];b.push({ad_unit_code:a.ad_unit_code,sizes:a.sizes,div_id:a.div_id,slot:a.slot,is_companion:a.is_companion})},display:function(a){function b(a,b){var c=function(){var c=googletag.defineSlot(a.ad_unit_code,a.sizes,a.div_id);a.is_companion&&(console.log("Configuring companion ad in position for div ID `"+a.div_id+"`"),c.addService(googletag.companionAds())),c.addService(googletag.pubads());for(var d in b.data.keywords)b.data.keywords.hasOwnProperty(d)&&c.setTargeting(d,b.data.keywords[d]);c.setTargeting("ad_slot",a.slot),c.setTargeting("adposition",a.slot),a.ad=c,googletag.display(a.div_id)};return c}console.log('Displaying ads for breakpoint "'+a+'"');for(var c=this.data.displayed[a]=this.data.displayed[a]||[],d=this.data.showing[a]=this.data.showing[a]||[],e=this.data.positions[a]||[],f=0;f<e.length;++f){var g=e[f];d.push(g),g.isHidden&&(console.log("Showing ad div #"+g.div_id),document.getElementById(g.div_id).style.display="block",g.isHidden=!1);for(var h=!1,i=0;i<c.length;i++)if(c[i].div_id==g.div_id){console.log("Ad "+g.ad_unit_code+' already displayed for breakpoint "'+a+'"'),h=!0;break}if(!h){c.push(g);var j=this;console.log("Displaying ad "+g.ad_unit_code+' for breakpoint "'+a+'"');var k=b(g,j);k()}}},hide:function(a){console.log('Hiding ads for breakpoint "'+a+'"');for(var b=this.data.showing[a]||[],c=0;c<b.length;++c){var d=b[c];console.log("Hiding ad div #"+d.div_id),document.getElementById(d.div_id).style.display="none",d.isHidden=!0}this.data.showing[a]=[]},refresh:function(){var a=[];for(var b in this.data.showing)if(this.data.showing.hasOwnProperty(b))for(var c=this.data.showing[b],d=0;d<c.length;d++)a.push(c[d].ad);googletag.pubads().refresh(a)}}}();