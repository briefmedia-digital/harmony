!function(){function a(a,c){b("event","Creating new ad slot.");var d,e,f={slotRenderEnded:[]},g=new Date;b("event","Slot "+c.name+" defined.");var h=c.mapping||[],i=c.companion||!1,j=(c.interstitial||!1,c.targeting||{});d=c.interstitial?googletag.defineOutOfPageSlot(c.adunit,c.id):googletag.defineSlot(c.adunit,c.sizes,c.id),d.divId=c.id,d.breakpoint=c.breakpoint;for(e in j)d.setTargeting(e,j[e]);return d.defineSizeMapping(h),"function"==typeof c.callback&&(f.slotRenderEnded.push(c.callback),b("event","Attached provided callback for "+c.name)),d.on=function(a,c){f[a]=f[a]||[],f[a].push(c),b("event","Attached new callback for "+a)},a.addEventListener("slotRenderEnded",function(a){var e,h,i;if(a.slot===d)for(b("event","slotRenderEnded for "+c.name),i=new Date,b("metric",{event:"Total load time",slot:c.name,value:i-g}),h=f.slotRenderEnded.length,e=0;h>e;e+=1)f.slotRenderEnded[e](a)}),i&&d.addService(googletag.companionAds()),d.addService(a),d}var b=Lumberjack();window.Harmony=function(c){c=c||!1;var d={},e={};return b("event","Harmony defined"),{load:function(c){b("event","Generating ad slots.");var f,g,h,i=c.slots,j=i.length,k=googletag.pubads();for(f=0;j>f;f+=1)h=i[f],g=a(k,h),d[h.name]=g,e[h.breakpoint]=e[h.breakpoint]||[],e[h.breakpoint].push(g);b("event","Applying pubads targeting."),i=c.targeting;for(f in i)h=i[f],b("event","- "+f+" = "+h),k.setTargeting(f,h);b("event","Harmony config loaded.")},log:b,slot:d,breakpoint:e,defineSlot:function(b){var c=googletag.pubads(),f=a(c,b);d[b.name]=f,e[b.breakpoint]=e[b.breakpoint]||[],e[b.breakpoint].push(f)},show:{breakpoint:function(a){Adgeletti.display(a);var d,f,g,h;b("event","Showing ads at breakpoint "+a);try{for(f=e[a].length,d=0;f>d;d+=1)g=e[a][d].divId,c||googletag.display(g),h=document.getElementById(g),h&&(h.style.display="block")}catch(i){b("error",{msg:"Failed to show breakpoint "+a,err:i})}},slot:function(a){b("event","Showing ad at slot "+a);var e=d[a].divId;c||googletag.display(e),document.getElementById(e).style.display="block"}},hide:{breakpoint:function(a){var c,d,f,g;Adgeletti.hide(a),b("event","Hiding ads at breakpoint "+a);try{for(d=e[a].length,c=0;d>c;c+=1)f=e[a][c].divId,g=document.getElementById(f),g&&(g.style.display="none")}catch(h){b("error",{msg:"Failed to hide breakpoint "+a,err:h})}},slot:function(a){b("event","Hiding ad at slot "+a);var c=d[a].divId;document.getElementById(c).style.display="none"}}}},window.console=window.console||{log:function(){}};var c=new Date;window.Adgeletti={log:b,data:{positions:{},showing:{},displayed:{},keywords:{}},add_keywords:function(a){for(var b in a)a.hasOwnProperty(b)&&(this.data.keywords[b]=a[b])},position:function(a){b("event","Slot "+a.slot+" defined.");var c=this.data.positions[a.breakpoint]=this.data.positions[a.breakpoint]||[];c.push({ad_unit_code:a.ad_unit_code,sizes:a.sizes,div_id:a.div_id,slot:a.slot,is_companion:a.is_companion})},display:function(a){function d(a,d){var e=function(){var e=googletag.defineSlot(a.ad_unit_code,a.sizes,a.div_id);googletag.pubads().addEventListener("slotRenderEnded",function(d){if(d.slot===e){b("event","slotRenderEnded for "+a.slot);var f=new Date;b("metric",{event:"Total load time",slot:a.slot,value:f-c})}}),a.is_companion&&(console.log("Configuring companion ad in position for div ID `"+a.div_id+"`"),e.addService(googletag.companionAds())),e.addService(googletag.pubads());for(var f in d.data.keywords)d.data.keywords.hasOwnProperty(f)&&e.setTargeting(f,d.data.keywords[f]);e.setTargeting("ad_slot",a.slot),e.setTargeting("adposition",a.slot),a.ad=e,googletag.display(a.div_id)};return e}console.log('Displaying ads for breakpoint "'+a+'"');for(var e=this.data.displayed[a]=this.data.displayed[a]||[],f=this.data.showing[a]=this.data.showing[a]||[],g=this.data.positions[a]||[],h=0;h<g.length;++h){var i=g[h];f.push(i),i.isHidden&&(console.log("Showing ad div #"+i.div_id),document.getElementById(i.div_id).style.display="block",i.isHidden=!1);for(var j=!1,k=0;k<e.length;k++)if(e[k].div_id==i.div_id){console.log("Ad "+i.ad_unit_code+' already displayed for breakpoint "'+a+'"'),j=!0;break}if(!j){e.push(i);var l=this;console.log("Displaying ad "+i.ad_unit_code+' for breakpoint "'+a+'"');var m=d(i,l);m()}}},hide:function(a){console.log('Hiding ads for breakpoint "'+a+'"');for(var b=this.data.showing[a]||[],c=0;c<b.length;++c){var d=b[c];console.log("Hiding ad div #"+d.div_id),document.getElementById(d.div_id).style.display="none",d.isHidden=!0}this.data.showing[a]=[]},refresh:function(){var a=[];for(var b in this.data.showing)if(this.data.showing.hasOwnProperty(b))for(var c=this.data.showing[b],d=0;d<c.length;d++)a.push(c[d].ad);googletag.pubads().refresh(a)}},b("event","Adgeletti defined.")}();
