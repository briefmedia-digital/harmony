!function(a){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=a();else if("function"==typeof define&&define.amd)define([],a);else{var b;b="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,b.harmony=a()}}(function(){return function a(b,c,d){function e(g,h){if(!c[g]){if(!b[g]){var i="function"==typeof require&&require;if(!h&&i)return i(g,!0);if(f)return f(g,!0);var j=new Error("Cannot find module '"+g+"'");throw j.code="MODULE_NOT_FOUND",j}var k=c[g]={exports:{}};b[g][0].call(k.exports,function(a){var c=b[g][1][a];return e(c?c:a)},k,k.exports,a,b,c,d)}return c[g].exports}for(var f="function"==typeof require&&require,g=0;g<d.length;g++)e(d[g]);return e}({1:[function(a,b,c){b.exports=function(){throw Error("[BaseClass] Abstract method was called without definition.")}},{}],2:[function(a,b,c){b.exports=function(a,b,c){return function(){var d,e=b.base;return b.base=c,d=a.apply(b,arguments),b.base=e,d}}},{}],3:[function(a,b,c){(function(c){function d(a){return a=a||{},a.extend=function(b){var d,g={base:a.base};b=b||{},a.base=g;for(d in a)a[d]instanceof c.Function&&(g[d]=e(a[d],a,g.base));for(d in b)a[d]=b[d];return"_create"in b?a._create():a._create=f,a},"_create"in a?a._create.call(a):a._create=f,a}var e=a("./base-swap.js"),f=a("./stub.js");d.Abstract=a("./abstract.js"),d.Stub=f,b.exports=d}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./abstract.js":1,"./base-swap.js":2,"./stub.js":4}],4:[function(a,b,c){b.exports=function(){}},{}],5:[function(a,b,c){(function(a){b.exports=function(b){var c,d={},e={},f=[],g=a.localStorage||{};return c=function(a,c){var h,i,a,j,k="string"==typeof a,l=typeof c,m="undefined"!==l&&"function"!==l;if("on"===g.lumberjack||b){if(!k||!m)throw Error("Lumberjack Error: log(channel, data) requires an channel {String} and a payload {String|Object|Number|Boolean}.");for(j={time:new Date,data:c,channel:a,id:f.length},d[a]=d[a]||[],d[a].push(j),f.push(j),e[a]=e[a]||[],i=e[a].length,h=0;h<i;h+=1)e[a][h](c)}},c.clear=function(a){a?d[a]=[]:(d={},f=[])},c.readback=function(a,b){var c="string"==typeof a;if(c)return b?JSON.stringify(d[a],null,4):d[a]||[];throw Error("log.readback(channel, pretty) requires an channel {String}.")},c.readback.master=function(a){return a?JSON.stringify(f,null,4):f},c.readback.channels=function(a){var b=Object.keys(d);return a?JSON.stringify(b):b},c.flush=function(a){var b;return a?(b=d[a],d[a]=[]):(d={},f=[],b=[]),b},c.on=function(a,b){var c="string"==typeof a,d="function"==typeof b;if(!c||!d)throw Error("log.on(channel, cb) requires an channel {String} and a callback {Function}.");e[a]=e[a]||[],e[a].push(b)},c.off=function(a){var b="string"==typeof a;if(!b)throw Error("log.off(channel) requires an channel {String}.");e[a]=[]},c.enable=function(){b=!0},c.disable=function(){b=!1},c}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],6:[function(a,b,c){b.exports={name:"harmonyjs",version:"4.1.1",description:"Simplify your DFP business logic.",main:"src/harmony.js",scripts:{test:"grunt test"},repository:{type:"git",url:"https://github.com/cobbdb/harmony.git"},keywords:["doubleclick","ads","dfp","revenue","adslot","adunit","advertising"],homepage:"https://github.com/cobbdb/harmony",bugs:{url:"https://github.com/cobbdb/harmony/issues"},author:"Dan Cobb <cobbdb@gmail.com> (http://www.github.com/cobbdb)",license:"MIT",dependencies:{baseclassjs:"4.0.1",lumberjackjs:"1.2.0"},devDependencies:{curb:"^1.0.1",grunt:"^1.0.1","grunt-browserify":"^5.0.0","grunt-contrib-jasmine":"^1.0.3","grunt-contrib-jshint":"^1.0.0","grunt-contrib-uglify":"^2.0.0","grunt-exec":"^1.0.0",jquery:"2.x",matchdep:"^1.0.1",semver:"^5.3.0"}}},{}],7:[function(a,b,c){(function(c){var d=a("../adslot.js"),e=a("../util.js"),f=a("../slot-set.js"),g=a("../group-set.js"),h=a("../log.js");b.exports=function(a){var b;try{b=d(c.googletag.pubads(),e.scrubConf(a)),f.add(b),g.add(a.group,b)}catch(b){h("error",{msg:"Slot failed to load during call to defineSlot()",conf:a,err:b})}return b}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../adslot.js":14,"../group-set.js":17,"../log.js":19,"../slot-set.js":21,"../util.js":22}],8:[function(a,b,c){var d=a("../slot-set.js"),e=a("../group-set.js");b.exports={slot:function(a){d.get(a).enabled=!1},group:function(a){var b,c=e.get(a),d=c.length;for(b=0;b<d;b+=1)c[b].enabled=!1}}},{"../group-set.js":17,"../slot-set.js":21}],9:[function(a,b,c){var d=a("../slot-set.js"),e=a("../group-set.js");b.exports={slot:function(a){d.get(a).enabled=!0},group:function(a){var b,c=e.get(a),d=c.length;for(b=0;b<d;b+=1)c[b].enabled=!0}}},{"../group-set.js":17,"../slot-set.js":21}],10:[function(a,b,c){var d=a("../slot-set.js"),e=a("../group-set.js"),f=a("../log.js");b.exports={group:function(a){var b,c,d=e.get(a),g=d.length;for(f("hide","Hiding ads in group "+a),b=0;b<g;b+=1)c=document.getElementById(d[b].divId),c?c.style.display="none":f("error",{msg:"Failed to hide slot in group",group:a,reason:"Slot was missing from the DOM",id:d[b].divId})},slot:function(a){var b,c=d.get(a);f("hide",{msg:"Hiding slot",name:a});try{b=document.getElementById(c.divId),b.style.display="none"}catch(b){f("error",{msg:"Failed to hide slot",name:a,err:b})}}}},{"../group-set.js":17,"../log.js":19,"../slot-set.js":21}],11:[function(a,b,c){(function(c){var d=a("../adslot.js"),e=a("../util.js"),f=a("../breakpoint-watcher.js"),g=a("../slot-set.js"),h=a("../group-set.js"),i=a("../log.js");b.exports=function(a){var b=c.googletag.pubads();a=a||{},a.slots=a.slots||[];var j,k,l,m=a.slots.length;for(i("load","Generating ad slots."),j=0;j<m;j+=1){l=a.slots[j];try{k=d(b,e.scrubConf(l)),g.add(k),h.add(k.group,k)}catch(a){i("error",{msg:"Slot failed to load during call to load().",conf:l,err:a})}}var n,o,p=a.targeting||{};i("load","Applying pubads targeting.");for(n in p)o=p[n],i("load","- "+n+" = "+o),b.setTargeting(n,o);f.add(a.breakpoints),i("load","Harmony config loaded.")}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../adslot.js":14,"../breakpoint-watcher.js":15,"../group-set.js":17,"../log.js":19,"../slot-set.js":21,"../util.js":22}],12:[function(a,b,c){(function(c){var d=a("../slot-set.js"),e=a("../group-set.js");b.exports=function(){var a,b,e,f,g=[],h=[],i=d.getAll();for(f in i)e=i[f],e.enabled&&(e.active?g.push(e):h.push(e));for(c.googletag.pubads().refresh(g),b=h.length,a=0;a<b;a+=1)e=h[a],e.active=!0,c.googletag.display(e.divId)},b.exports.slot=function(a){var b=d.get(a);!b.mock&&b.enabled&&(b.active?c.googletag.pubads().refresh([b]):(b.active=!0,c.googletag.display(b.divId)))},b.exports.group=function(a){var b,d,f=e.get(a),g=f.length,h=[],i=[];for(b=0;b<g;b+=1)d=f[b],d.enabled&&(d.active?h.push(d):i.push(d));for(c.googletag.pubads().refresh(h),g=i.length,b=0;b<g;b+=1)d=i[b],d.active=!0,c.googletag.display(d.divId)}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../group-set.js":17,"../slot-set.js":21}],13:[function(a,b,c){(function(c){var d=a("../slot-set.js"),e=a("../group-set.js"),f=a("../log.js");b.exports={group:function(a){var b,d,g,h=e.get(a),i=h.length;f("show",{msg:"Showing ads in group",group:a});try{for(b=0;b<i;b+=1)d=h[b],d.tsCalled=c.Date.now(),d.enabled&&(d.active=!0,c.googletag.display(d.divId)),g=document.getElementById(d.divId),g?g.style.display="block":f("error",{msg:"Failed to show slot for group",group:a,reason:"Slot was missing from the DOM",slot:d})}catch(b){f("error",{msg:"Failed to show group",group:a,err:b})}},slot:function(a){var b,e;f("show",{msg:"Showing slot",name:a});try{b=d.get(a),b.tsCalled=c.Date.now(),b.enabled&&(b.active=!0,c.googletag.display(b.divId)),e=document.getElementById(b.divId),e.style.display="block"}catch(b){f("error",{msg:"Failed to show slot",name:a,err:b})}}}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../group-set.js":17,"../log.js":19,"../slot-set.js":21}],14:[function(a,b,c){(function(c){var d=a("./log.js"),e=a("./slot-set.js"),f=a("baseclassjs"),g=a("./event-handler.js");b.exports=function(a,b){var h,i,j,k=c.Date.now(),l=b.mapping||[],m=b.companion||!1,n=(b.interstitial||!1,b.targeting||{});if(!c.document.getElementById(b.id))throw c.Error("Ad slot container was not found in the DOM.");h=b.interstitial?c.googletag.defineOutOfPageSlot(b.adunit,b.id):c.googletag.defineSlot(b.adunit,b.sizes,b.id),j=e.cached.callbacks(b.name),b.on=b.on||[];for(i in b.on)j.events[i]=j.events[i]||[],j.events[i]=[].concat(j.events[i],b.on[i]);b.one=b.one||[];for(i in b.one)j.singles[i]=j.singles[i]||[],j.singles[i]=[].concat(j.singles[i],b.one[i]);f(h).extend(g(j)),h.divId=b.id,h.name=b.name,h.group=b.group,h.sizes=b.sizes,h.adunit=b.adunit,h.enabled=b.enabled!==!1,h.active=!1;for(i in n)h.setTargeting(i,n[i]);n=e.cached.targeting(b.name);for(i in n)h.setTargeting(i,n[i]);return h.defineSizeMapping(l),"function"==typeof b.callback&&h.on("slotRenderEnded",b.callback),a.addEventListener("slotRenderEnded",function(a){var e;a.slot===h&&(e=c.Date.now(),d("metric",{event:"DFP Call Complete",slot:b.name,timeSinceCalled:e-h.tsCalled,timeSinceCreated:e-k}),h.trigger("slotRenderEnded",a))}),m&&h.addService(c.googletag.companionAds()),h.addService(a),h}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./event-handler.js":16,"./log.js":19,"./slot-set.js":21,baseclassjs:3}],15:[function(a,b,c){(function(c){var d,e=a("baseclassjs"),f=a("./event-handler.js"),g=a("./screen.js"),h=!1,i=!0,j=[];b.exports=e({current:function(){var a,b=j.length,c=g.width(),d=j[b-1];for(a=0;a<b;a+=1)if(c>=j[a]){d=j[a];break}return d},add:function(a){j=j.concat(a||[]),j.sort(function(a,b){return b-a}),b.exports.run()},getAll:function(){return j},clear:function(){j=[]},run:function(a){function e(){var a=b.exports.current();a!==d&&(d=a,b.exports.trigger("update",a))}!h&&j.length&&(h=!0,i=!0,c.addEventListener("resize",function(){i&&(i=!1,e(),c.setTimeout(function(){i=!0},a||250))})),e()}}).extend(f())}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./event-handler.js":16,"./screen.js":20,baseclassjs:3}],16:[function(a,b,c){b.exports=function(a){var b,c={},d={},e={};a=a||{};for(b in a.events)c[b]=[].concat(a.events[b]||[]);for(b in a.singles)d[b]=[].concat(a.singles[b]||[]);return{on:function(a,b,d){!d&&a in e&&b.call(this,e[a].data),c[a]=c[a]||[],c[a].push(b)},one:function(a,b,c){!c&&a in e?b.call(this,e[a].data):(d[a]=d[a]||[],d[a].push(b))},off:function(a){a?(c[a]=[],d[a]=[]):(c={},d={},e={})},trigger:function(a,b){var f=this;a in c&&c[a].forEach(function(a){a.call(f,b)}),a in d&&(d[a].forEach(function(a){a.call(f,b)}),d[a]=[]),e[a]={data:b}}}}},{}],17:[function(a,b,c){var d=(a("./util.js"),{});b.exports={get:function(a){return d[a]||[]},add:function(a,b){return d[a]=d[a]||[],d[a].push(b),d[a]},clear:function(){d={}}}},{"./util.js":22}],18:[function(a,b,c){(function(c){var d=a("./log.js"),e=a("./slot-set.js"),f=a("./group-set.js"),g=a("baseclassjs"),h=a("./event-handler.js"),i=a("./breakpoint-watcher.js");d("init","Harmony defined."),b.exports=g({_create:function(){var a=this;i.on("update",function(b){a.trigger("breakpoint/update",b)});try{c.googletag.pubads().addEventListener("slotRenderEnded",function(b){a.trigger("slotRenderEnded",b)})}catch(a){d("error",'It appears "googletag" is not defined!')}},version:a("../package.json").version,load:a("./actions/load.js"),addBreakpoints:i.add,getBreakpoints:i.getAll,breakpoint:i.current,log:d,slot:e.get,hasSlot:e.has,group:f.get,defineSlot:a("./actions/define-slot.js"),enable:a("./actions/enable.js"),disable:a("./actions/disable.js"),refresh:a("./actions/refresh.js"),show:a("./actions/show.js"),hide:a("./actions/hide.js")}).extend(h())}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../package.json":6,"./actions/define-slot.js":7,"./actions/disable.js":8,"./actions/enable.js":9,"./actions/hide.js":10,"./actions/load.js":11,"./actions/refresh.js":12,"./actions/show.js":13,"./breakpoint-watcher.js":15,"./event-handler.js":16,"./group-set.js":17,"./log.js":19,"./slot-set.js":21,baseclassjs:3}],19:[function(a,b,c){var Lumberjack=a("lumberjackjs");b.exports=Lumberjack()},{lumberjackjs:5}],20:[function(a,b,c){(function(a){b.exports={width:function(){return a.innerWidth||a.document.documentElement.clientWidth||a.document.body.clientWidth},height:function(){return a.innerHeight||a.document.documentElement.clientHeight||a.document.body.clientHeight}}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],21:[function(a,b,c){var d=a("./util.js"),e={},f={events:{},singles:{},targ:{}};b.exports={cached:{callbacks:function(a){return{events:f.events[a]||{},singles:f.singles[a]||{}}},targeting:function(a){return f.targ[a]||{}}},get:function(a){return e[a]||{on:function(b,c){f.events[a]=f.events[a]||{},f.events[a][b]=[].concat(f.events[a][b]||[],c)},one:function(b,c){f.singles[a]=f.singles[a]||{},f.singles[a][b]=[].concat(f.singles[a][b]||[],c)},setTargeting:function(b,c){f.targ[a]=f.targ[a]||{},f.targ[a][b]=c},trigger:d.noop,off:d.noop,mock:!0}},add:function(a){e[a.name]=a},getAll:function(){return e},has:function(a){return a in e},clear:function(){e={},f.events={},f.singles={},f.targ={}}}},{"./util.js":22}],22:[function(a,b,c){b.exports={noop:function(){},slotCount:0,scrubConf:function(b){var c,d,e=a("./slot-set.js"),f={el:{}};if(b.drone||e.has(b.name)){do if(d=document.getElementById(b.id)){if(!d.innerHTML)return this.slotCount+=1,c="-h"+this.slotCount,d.id+=c,f.el.id=f.id,b.id=d.id,b.name+=c,b;f.el=d,f.id=d.id,d.id="h-temp"}while(d);throw Error("Ad slot container was not found in the DOM.")}return b}}},{"./slot-set.js":21}]},{},[18])(18)});